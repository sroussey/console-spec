<!DOCTYPE html>
<html>
  <head>
    <title>Console</title>
    <meta charset='utf-8'>
    <style>
     body { line-height: 130% }
    .note-inline, .notes-inline { font-style: italic }
    .note-inline::before { content: "Note: "; font-weight: bold; }
    .notes-inline::before { content: "Notes: "; font-weight: bold; }
    </style>
    <script src='respec/js/respec2.js' class='remove'></script>
    <script class='remove'>
    function getLastModifiedDate() {
      var d = new Date(document.lastModified);
      return d.toISOString().substring(0,10);
    }
      respec2([
                "core/default-root-attr",
                "core/style",
                "w3c/style",
                "w3c/headers",
                "core/webidl",
                "core/data-transform", // done REALLY early in case the transform ends up needing to include something
                "core/data-include",
                "core/inlines",
                "w3c/bibref",
                "core/structure",
                "w3c/structure",
                "core/dfn",
                // these at the end
                "core/remove-respec"
              ], 
              {
                  specStatus: "unofficial",
                  shortName:  "console-api",
                  edDraftURI: "http://sideshowbarker.github.net/console-object",
                  editors: [
                        {   name:       "Michael[tm] Smith",
                            url:        "http://sideshowbarker.net",
                            mailto:     "mike@w3.org"
                        },
                  ],
                  wgURI:        "http://w3.org/TK",
                  wg:           "Web Developer Tools Working Group",
                  wgPublicList: "wdt",
                  wgPatentURI:  "http://w3.org/TK",
                  additionalCopyrightHolders: "Michael[tm] Smith",
                  publishDate: getLastModifiedDate()
              }
      );
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
        This specification defines the <code>Console</code> interface,
        which represents a means for programatically writing messages,
        data, and other output to a console such as a standalone shell
        environment for a scripting language, an operating-system shell,
        or the console component of a Web-developer toolsuite in a Web
        browser.</p>
      </p>
      <p class="note">
        Additional editorial contributions to this document are welcome.
        For details on how to contribute, see the
        <a href="./README.html#contributing">instructions in the accompanying README file</a>.
      </p>
    </section>
    <section id='sotd'>
      <p>
        [more TK later…]
      </p>
    </section>

    <section class='informative' id="background">
      <h2>Background and scope</h2>
      <p>Conceptually, a
      <dfn id="console-term" title="console-term">console</dfn>
      is a particular kind of “window” to which output can be written and
      recorded and from which that output may subsequently be displayed or
      otherwise accessed (for example, through non-visual mechanisms such
      as accessibility technology software that makes the information from
      the console available aurally).</p>

      <p class="note">In addition to simply displaying information, many
      consoles also support interactive input. Such consoles act as
      command-line interpreters, allowing users to enter commands or
      program statements, and then immediately display the results of
      evaluating those commands or statements. However, this specification
      does not address at all that command-line interpreter aspect of
      consoles. It instead focuses only on the interface for
      programatically writing output to consoles.</p>
      </p>

      <p>Among other purposes that consoles have, they are commonly used by
      developers while testing and debugging programs and scripts, in the
      following way:</p>

      <ul>
         <li>the code for a program or script invokes methods that cause
         “payloads” to be sent to a console, along with metadata about
         those payloads</li>
         <li>a payload can be a debugging message, data such as the values
         of particular variables, and even entire objects</li>
         <li>payload metadata can include properties that indicate
         conditions the payload is associated with; for example, metadata
         that indicates an error condition or a warning condition</li>
         <li>the console displays the payload, perhaps even (in the case of
         object payloads) rendering it in a way that allows it to be
         interactively examined in the console (for example, by providing a
         collapsible tree view of the object)</li>
         <li>additionally, the console can use the payload metadata to
         supplement the display of the payload itself; for example, for a
         payload associated with an error condition, the console can
         prepend the string “<code>Error</code>” or an error icon to its
         rendering of the payload</li>
      </ul>

      <p>Examples of specific classes of console implementations that
      provide a mechanism like the one described above include:</p>

      <ul>
       <li>the console components of Web-developer toolsuites in Web browsers</li>
       <li>interactive standalone shell environments for scripting languages</li>
       <li>non-interactive interpreters for scripting languages which send
       their output to operating-system shells</li>
      </ul>

      <p>This specification is intended to provide a language-neutral
      console model inspired by, and compatible with, the JavaScript
      <code>window.console</code> object that first appeared as part of the
      <a href="http://http://getfirebug.com/">Firebug</a> plugin for
      Mozilla Firefox and that has subsequently been implemented in other
      major browsers, as well as in so-called “server side” JavaScript
      environments such as <a href="http://nodejs.org">node</a>.</p>

      <p>The scope of this specification is thus limited to:</p>

      <ul>
        <li>a definition of an abstract
        <a><code>Console</code></a>
        interface for programatically writing output
        <a title="payload">payloads</a>
        to a console</li>

        <li>a specification of the behavior that 
        <a title="conforming console handler">conforming console handlers</a>
        must follow to process such
        <a><code>Console</code></a>
        <a title="payload">payloads</a></li>
      </ul>
    </section>

    <section id="infrastructure">
    <h2>Common infrastructure</h2>
    <p>This section defines concepts and terminology used in other parts of
    this specification.</p>
      <section id="terminology">
        <h2>Terminology</h2>
        <dl>
          <dt><dfn id="" title="">…</dfn></dt>
          <dd>…</dd>
        </dl>
      </section>
      <section id='conformance'>
        <p>
          This specification defines a single conformance class: a
          <a>conforming console handler</a>.</p>
        <p>
          A <dfn id="console-handler" title="console handler">console handler</dfn>
          is any implementation capable of processing
          <a><code>Console</code></a>
          <a title="payload">payloads</a>
          according to the definitions and requirements
          provided in this specification.</p>
          <p>A <dfn id="conforming-console-handler" title="conforming console handler">conforming console handler</dfn>
          is any
          <a>console handler</a>
          that conforms to the definitions and requirements provided in
          this specification.</p>
          <p><a title="conforming console handler">Conforming console handlers</a>
          MUST:</p>
          <ul>
            <li>expose a
            <a><code>Console</code></a>
            interface as defined in this specification</li>
            <li>process
            <a title="payload">payloads</a>
            according to the requirements given in this specification</li>
          </ul>
        </p>
      </section>
    </section>

    <section id="the-console-interface">
      <h2>The Console interface</h2>
      <p>This section defines the <a><code>Console</code></a> interface.
        The <a><code>Console</code><a> interface
        represents a means for programatically writing output
        <a title="payload">payloads</a>
        to a
        <a title="console-term">console</a>.</p>

      <dl title='interface Console' class='idl'>
        <dt>void log (in any... args)</dt>
        <dd>
          <a title="send a payload">Sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>.
          <span class="notes-inline">
          <a>permits format string</a>,
          <a>writes to standard out</a></span>
        </dd>
        <dt>void debug (in any... args)</dt>
        <dd>
          <a title="send a payload">Sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>,
          and the value of its
          <a><code>LineNumber</code></a>
          property set to the source-code line number from which the method
          was called.
          <span class="notes-inline">
          <a>permits format string</a>,
          <a>writes to standard error</a></span>
        </dd>
        <dt>void info (in any... args)</dt>
        <dd>
          <a title="send a payload">Sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>,
          and the value of its
          <a><code>Severity</code></a>
          property set to
          <i>Info</i>,
          and the value of its
          <a><code>LineNumber</code></a>
          property set to the source-code line number from which the method
          was called.
          <span class="notes-inline">
          <a>permits format string</a>,
          <a>writes to standard error</a></span>
        </dd>
        <dt>void warn (in any... args)</dt>
        <dd>
          <a title="send a payload">Sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>,
          and the value of its
          <a><code>Severity</code></a>
          property set to
          <i>Warning</i>,
          and the value of its
          <a><code>LineNumber</code></a>
          property set to the source-code line number from which the method
          was called.
          <span class="notes-inline">
          <a>permits format string</a>,
          <a>writes to standard error</a></span>
        </dd>
        <dt>void error (in any... args)</dt>
        <dd>
          <a title="send a payload">Sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>,
          and the value of its
          <a><code>Severity</code></a>
          property set to
          <i>Error</i>,
          and the value of its
          <a><code>LineNumber</code></a>
          property set to the source-code line number from which the method
          was called.
          <span class="notes-inline">
          <a>permits format string</a>,
          <a>writes to standard error</a></span>
        </dd>
        <dt>void assert (boolean expression, in any... args)</dt>
        <dd>
          Tests whether the boolean <var>expression</var> argument evaluates to
          <code>true</code>; and, if <var>expression</var> does not evaluate to
          <code>true</code>,
          <a title="throw-assertion-failed">throws an <i>assertion failed</i> exception</a>
          and, if <var>args</var> is specified,
          <a title="send a payload">sends a payload</a>
          to the console, with the value of its
          <a><code>PayloadContents</code></a> property set to <var>args</var>.
          <span class="notes-inline">
          <a>writes to standard error</a></span>
        </dd>
      </dl>
      <div class="note">
        Authoring guidelines:
        <ul>
        <li>In calls of methods whose descriptions above have the
        annotation <dfn id="permits-format-string" title="permits format
        string">permits format string</dfn>, the first argument in
        <var>args</var> can be a <a>format string</a>, in which case any
        subsequent arguments become the <a>argument list</a> for that
        <a>format string</a>.</li>
        <li>For calls of methods whose descriptions above have the
        annotation <dfn id="writes-to-standard-out" title="writes to standard
        out">writes to standard out</dfn>: If the environment to which the
        <a>console handler</a> writes output has a distinction between
        standard out and standard error, the method writes to standard
        out.</li>
        <li>For calls of methods whose descriptions above have the
        annotation <dfn id="writes-to-standard-error" title="writes to standard
        error">writes to standard error</dfn>: If the environment to which the
        <a>console handler</a> writes output has a distinction between
        standard out and standard error, the method writes to standard
        error.</li>
      </div>
      <section id="format-strings">
        <h2>Format strings</h2>
        <p>Some <a><code>Console</code> methods support use of printf-like
        <a title="format string">format strings</a> 
        <p>A <dfn id="format-string" title="format string">format string</dfn>
        is a printf-like string that contains ordinary literal text in
        combination with <a title="conversion specifier">conversion specifiers</a>.</p>

        <p>The following is an example that uses a <a>format string</a>.</p>
        <pre class="example">foo</pre>
        
        <p>A <dfn id="conversion-specifier" title="conversion specifier">conversion specifier</dfn>
        is a simple form of markup consisting of a "<code>%</code>"
        character followed by a single character and which are not rendered liter In
        <a><code>Console</code></a> method
        calls that allow <a>format strings</a>, the <a>format string</a> is
        always the first argument, and is followed by one or more arguments
        that serve as its <a>argument list</a>.
        The <dfn id="argument-list" title="argument list">argument
        list</dfn> for a <a>format string</a> consists of .</p>
      </section>
    </section>
    <section id="payload-handling">
      <h2>Handling payloads</h2>
      <p>This section specifies how
      <a title="conforming console handler">conforming console handlers</a>
      <a title="send a payload">send payloads</a>
      and 
      <a title="process a payload">process payloads</a>.</p>
      </p>

      <section class="informative" id="payload-properties">
        <h2>The payload concept</h2>
        <p>Conceptually, a
        <dfn id="payload" title="payload">payload</dfn>
        is a unit of information for output to a console. Examples of the
        possible contents of a <a>payload</a> include:</p>
        <ul>
          <li>a literal message string</li>
          <li>a data item, such as the value of a variable</li>
          <li>an object</li>
          <li>a “printf”-like format string, followed by additional
          parameters, with format specifiers such as "<code>%s</code>" to
          indicate where in the rendered message the values of the other
          parameters are to be displayed</li>
          <li>any combination of literal message strings, data items, and objects</li>
        </ul>
      </section>
      <section id="payload-properties">
        <h2>The properties of a payload</h2>
        <p class="informative">A
        <dfn id="payload" title="payload">payload</dfn>
        consists of three abstract properties:
          <a><code>PayloadContents</code></a>,
          <a><code>LineNumber</code></a>,
           and
          <a><code>Severity</code></a>.</p>
        <dl>
          <dt><dfn id="PayloadContents" title="PayloadContents"><code>PayloadContents</code></dfn></dt>
          <dd>The actual content of the <a>payload</a>, which consists of one
          or more <dfn id="payload-item" title="payload items">payload items</dfn>.

          <dt><dfn id="LineNumber" title="LineNumber"><code>LineNumber</code></dfn></dt>
          <dd>A source-code line number with which to associate a <a>payload</a>. …</dd>

          <dt><dfn id="Severity" title="Severity"><code>Severity</code></dfn></dt>
          <dd>An indicator of the severity level of a <a>payload</a>. There
          are three possible severity levels: <i>Error</i>, <i>Warning</i>, and <i>Info</i>.</dd>
          <p class="note-inline">The
          <a><code>PayloadContents</code></a>,
          <a><code>LineNumber</code></a>,
           and
          <a><code>Severity</code></a> properties are all abstractions used
          here for specification purposes only, and need not correspond to
          any specific entities within an implementation of this
          specification.</p>
        </section>
      </section>
      <section id="sending-payloads">
        <h2>Sending payloads</h2>
        <p>To <dfn id="send-a-payload" title="send a payload">send a payload</dfn>,
        a <a>conforming console handler</a> MUST follow these steps: …</p>
      </section>
      <section id="processing-payloads">
        <h2>Processing payloads</h2>
        <p>To <dfn id="process-a-payload" title="process a payload">process a payload</dfn>,
        a <a>conforming console handler</a> MUST follow these steps: …</p>
      </section>
      <section id="assertion-failed-exception">
        <h2>Throwing an <i>assertion failed</i> exception</h2>
        <p>To
        <dfn id="throw-assertion-failed" title="throw-assertion-failed">throw an <i>assertion failed</i> exception</dfn>,
        a <a>conforming console handler</a> MUST….</p>
      </section>
    </section>
    <section class='appendix'>
      <h2>Acknowledgements</h2>
      <p>This document incorporates modified and verbatim content from the
      <a href="http://getfirebug.com/wiki/index.php/Console_API">Console API</a>
      page of the
      <a href="http://getfirebug.com/wiki/index.php/Main_Page">Firebug Wiki</a>.</p>
    </section>
  </body>
</html>
